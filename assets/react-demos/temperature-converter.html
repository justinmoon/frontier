<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>React Temperature Converter</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <script src="./vendor/react.production.min.js"></script>
    <script src="./vendor/react-dom.production.min.js"></script>
    <script>
      (function () {
        const { useCallback, useEffect, useMemo, useRef, useState } = React;

        function parseInput(raw) {
          const trimmed = raw.trim();
          if (trimmed === "") {
            return { kind: "empty" };
          }
          const numeric = Number(trimmed);
          if (Number.isNaN(numeric)) {
            return { kind: "invalid" };
          }
          return { kind: "value", numeric };
        }

        function formatNumber(value) {
          if (!Number.isFinite(value)) {
            return "";
          }
          const result = value.toFixed(1);
          return result;
        }

        function TemperatureConverter() {
          const [celsius, setCelsius] = useState("");
          const [fahrenheit, setFahrenheit] = useState("");
          const [status, setStatus] = useState("Enter a temperature to convert.");
          const celsiusInputRef = useRef(null);
          const fahrenheitInputRef = useRef(null);

          const updateStatus = useCallback((state) => {
            if (state === "invalid") {
              setStatus("Enter a valid number to see the conversion.");
            } else if (state === "ready") {
              setStatus("Conversion ready.");
            } else {
              setStatus("Enter a temperature to convert.");
            }
          }, []);

          const handleCelsiusChange = useCallback(
            (event) => {
              const next = event.target.value;
              setCelsius(next);
              const parsed = parseInput(next);
              if (parsed.kind === "invalid") {
                updateStatus("invalid");
                setFahrenheit("");
                return;
              }
              if (parsed.kind === "empty") {
                updateStatus("empty");
                setFahrenheit("");
                return;
              }
              const converted = (parsed.numeric * 9) / 5 + 32;
              setFahrenheit(formatNumber(converted));
              updateStatus("ready");
            },
            [updateStatus]
          );

          const handleFahrenheitChange = useCallback(
            (event) => {
              const next = event.target.value;
              setFahrenheit(next);
              const parsed = parseInput(next);
              if (parsed.kind === "invalid") {
                updateStatus("invalid");
                setCelsius("");
                return;
              }
              if (parsed.kind === "empty") {
                updateStatus("empty");
                setCelsius("");
                return;
              }
              const converted = ((parsed.numeric - 32) * 5) / 9;
              setCelsius(formatNumber(converted));
              updateStatus("ready");
            },
            [updateStatus]
          );

          useEffect(() => {
            const celsiusEl = celsiusInputRef.current;
            const fahrenheitEl = fahrenheitInputRef.current;
            if (!celsiusEl || !fahrenheitEl) {
              return undefined;
            }

            celsiusEl.addEventListener("input", handleCelsiusChange);
            fahrenheitEl.addEventListener("input", handleFahrenheitChange);

            return () => {
              celsiusEl.removeEventListener("input", handleCelsiusChange);
              fahrenheitEl.removeEventListener("input", handleFahrenheitChange);
            };
          }, [handleCelsiusChange, handleFahrenheitChange]);

          const summary = useMemo(() => {
            if (status === "Conversion ready.") {
              return `Celsius ${celsius || "-"} â†” Fahrenheit ${fahrenheit || "-"}`;
            }
            if (status === "Enter a valid number to see the conversion.") {
              return "Input is not a number.";
            }
            return "Waiting for input.";
          }, [status, celsius, fahrenheit]);

          return React.createElement(
            "main",
            { id: "converter-root" },
            React.createElement(
              "header",
              null,
              React.createElement("h1", { id: "converter-heading" }, "Temperature Converter"),
              React.createElement(
                "p",
                { id: "conversion-status", role: "status", "aria-live": "polite" },
                status
              )
            ),
            React.createElement(
              "section",
              { className: "converter-panel" },
              React.createElement(
                "label",
                { className: "field" },
                "Celsius",
                React.createElement("input", {
                  ref: celsiusInputRef,
                  id: "celsius-input",
                  name: "celsius",
                  type: "text",
                  inputMode: "decimal",
                  value: celsius,
                  onChange: handleCelsiusChange,
                  placeholder: "0",
                })
              ),
              React.createElement(
                "label",
                { className: "field" },
                "Fahrenheit",
                React.createElement("input", {
                  ref: fahrenheitInputRef,
                  id: "fahrenheit-input",
                  name: "fahrenheit",
                  type: "text",
                  inputMode: "decimal",
                  value: fahrenheit,
                  onChange: handleFahrenheitChange,
                  placeholder: "32",
                })
              )
            ),
            React.createElement(
              "p",
              { id: "conversion-summary" },
              summary
            )
          );
        }

        const root = ReactDOM.createRoot(document.getElementById("root"));
        root.render(React.createElement(TemperatureConverter));
      })();
    </script>
    <style>
      body {
        font-family: system-ui, -apple-system, "Segoe UI", sans-serif;
        background: #0f172a;
        color: #e2e8f0;
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        margin: 0;
        padding: 16px;
      }
      #converter-root {
        background: #1e293b;
        border-radius: 12px;
        padding: 24px;
        width: min(360px, 100%);
        box-shadow: 0 12px 28px rgba(15, 23, 42, 0.5);
        display: flex;
        flex-direction: column;
        gap: 16px;
      }
      header h1 {
        margin: 0 0 8px;
        font-size: 22px;
      }
      #conversion-status {
        margin: 0;
        font-size: 14px;
        color: #cbd5f5;
      }
      .converter-panel {
        display: grid;
        gap: 12px;
      }
      .field {
        display: grid;
        gap: 6px;
        font-size: 14px;
        font-weight: 600;
      }
      .field input {
        padding: 10px 12px;
        border-radius: 8px;
        border: 1px solid rgba(148, 163, 184, 0.4);
        background: rgba(15, 23, 42, 0.6);
        color: inherit;
        font-size: 16px;
        font-variant-numeric: tabular-nums;
      }
      .field input:focus {
        outline: 2px solid #38bdf8;
        outline-offset: 2px;
      }
      #conversion-summary {
        background: rgba(30, 41, 59, 0.6);
        padding: 12px;
        border-radius: 8px;
        margin: 0;
        font-size: 14px;
      }
    </style>
  </head>
  <body>
    <div id="root"></div>
  </body>
</html>
